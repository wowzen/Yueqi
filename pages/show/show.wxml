<!-- 
This page will look different based on below conditions:
  currentUser = creator_id ==> "set event data button"
  if before deadline ==> "warning: It is before the deadline, do you want to confirm?"
  if after deadline ==> "warning: are you sure?" OK, confirmed
currentUser = invitee_id && submitted availability 
  if event date is set ==> only show invitation with event details  
  if date is not set ==> change availability button 
currentUser = invitee_id && has not submitted availability ==> 
  if event date is set ==> only show invitation with event details  
  if date is not set ==> submit availability button  -->
<view class="container">
  <view class="card">
    <image class="image" src="{{testImage}}" />
    <view class="activity">{{event.activity}}</view>
    <view class="occasion">For {{event.occasion}}</view>
    <view class="nickname">Organized by: {{event.creator_id.nickname}}</view>
  </view>

  <view class="select-date">Select a suitable date for you</view>

  <view>
    <radio-group bindchange="chooseDate">
      <label wx:for="{{slots}}" data-chosenSlot="{{slot.start_date}}" wx:for-item="slot" wx:key="{{slot.id}}" >
        <view class="date-cell">
          {{slot.start_date}} to {{slot.end_date}}
          <radio value="{{slot.id}}"/>
        </view>
      </label>
    </radio-group>
  </view>

  <view wx:if="">
    <button class="button" bindtap="submitAvailability">Submit</button>
  </view>

  <view>
    <button class="button" bindtap="changeAvailability">Change date</button>
  </view>

  <view wx:if="{{currentUser.id == event.creator_id.id}}">
    <button class="button" bindtap="{{deadlinePassed ? 'setFinalDate' : 'setFinalDateEarly'}}">Confirm</button>
  </view>
</view>



<!-- <view class="card" wx:for="{{slots}}" wx:for-item="slot">{{slot.start_date}} to {{slot.end_date}}</view> -->

<view wx:if="{{event.confirmed_date == ''}}">
  <radio-group bindchange="chooseDate">
    <label wx:for="{{slots}}" data-chosenSlot="{{slot.start_date}}" wx:for-item="slot" wx:key="{{slot.id}}" >
      <view class="">
        {{slot.start_date}} to {{slot.end_date}}
        <radio value="{{slot.id}}"/>
      </view>
    </label>
  </radio-group>
</view>

<view wx:else>
  <view>Event date & time: {{confirmedSlot.start_date}} to {{confirmedSlot.end_date}}</view>
</view>

<view wx:if="{{availabilityProvided}}">
  <button bindtap="changeAvailability">Change availability
  </button>
</view>

<view wx:elif="{{event.confirmed_date == ''}}">
  <button bindtap="submitAvailability">Submit availability
  </button>
</view>

<view wx:if="{{currentUser.id == event.creator_id.id && dateSelected && event.confirmed_date != ''}}">
  <button bindtap="{{deadlinePassed ? 'setFinalDate' : 'setFinalDateEarly'}}">Set final event date
  </button>
</view>

<view wx:if="{{currentUser.id == event.creator_id.id}}">
  <button open-type="share">Invite friends</button>
</view>
